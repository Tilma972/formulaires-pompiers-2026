<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commander Votre Encart - Calendrier 2026 Sapeurs-Pompiers</title>
  <link rel="stylesheet" href="../assets/css/main.css" />
  <link rel="stylesheet" href="../assets/css/enterprise-form.css" />
</head>

<body>
  <div class="container">
    <header>
      <img src="https://s3.dsolution-ia.fr/logos/logo-pompier.png" alt="Logo Sapeurs-Pompiers" class="logo">
      <div>
        <h1>Commander Votre Encart Publicitaire</h1>
        <p class="subtitle">Calendrier 2026 des Sapeurs-Pompiers de Clermont-l'H√©rault</p>
      </div>
    </header>

    <div class="intro">
      <h2>Finalisez votre commande d'encart publicitaire</h2>
      <p>Compl√©tez les informations ci-dessous pour confirmer votre participation au calendrier 2026 des
        Sapeurs-Pompiers.</p>
    </div>

    <div class="steps">
      <h3>Comment √ßa fonctionne :</h3>
      <ol>
        <li>V√©rifiez et compl√©tez vos informations de contact</li>
        <li>Choisissez le format d'encart qui vous convient</li>
        <li>S√©lectionnez les mois de parution souhait√©s</li>
        <li>Confirmez votre mode de paiement et finalisez</li>
      </ol>
    </div>

    <!-- Barre de progression -->
    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-step active" data-step="1">
          <div class="step-number">1</div>
          <div class="step-label">Informations</div>
        </div>
        <div class="progress-step" data-step="2">
          <div class="step-number">2</div>
          <div class="step-label">Format</div>
        </div>
        <div class="progress-step" data-step="3">
          <div class="step-number">3</div>
          <div class="step-label">Mois</div>
        </div>
        <div class="progress-step" data-step="4">
          <div class="step-number">4</div>
          <div class="step-label">Paiement</div>
        </div>
      </div>
    </div>

    <form id="enterprise-form" name="enterprise-form" method="POST" action="/"
      data-netlify-success-url="/enterprise-form/index.html">
      <!-- Champs cach√©s -->
      <input type="hidden" name="form-name" value="enterprise-form">

      <!-- √âTAPE 1: INFORMATIONS ENTREPRISE -->
      <div class="form-section active" id="step-1">
        <div class="section-title">√âTAPE 1 : VOS INFORMATIONS</div>

        <div class="form-row">
          <label for="entreprise_name">Nom de l'entreprise</label>
          <input type="text" id="entreprise_name" name="entreprise_name" readonly style="background-color: #f5f5f5;">
        </div>

        <div class="form-row">
          <label for="adresse">Adresse</label>
          <input type="text" id="adresse" name="adresse" readonly style="background-color: #f5f5f5;">
        </div>

        <div class="form-row">
          <label for="contact_name">Nom du contact *</label>
          <input type="text" id="contact_name" name="contact_name" required>
          <div class="error-message" id="contact-error">Veuillez indiquer un nom de contact</div>
        </div>

        <div class="form-row">
          <label for="email">Email de contact *</label>
          <input type="email" id="email" name="email" required>
          <div class="error-message" id="email-error">Veuillez indiquer un email valide</div>
        </div>

        <div class="form-row">
          <label for="telephone">T√©l√©phone *</label>
          <input type="tel" id="telephone" name="telephone" required>
          <div class="error-message" id="telephone-error">Veuillez indiquer un num√©ro de t√©l√©phone valide</div>
        </div>

        <button type="button" class="submit-btn" id="next-step-1">SUIVANT</button>
      </div>

      <!-- √âTAPE 2: CHOIX DU FORMAT -->
      <div class="form-section" id="step-2">
        <div class="section-title">√âTAPE 2 : CHOIX DU FORMAT</div>

        <p>S√©lectionnez le format qui convient le mieux √† vos besoins :</p>

        <div class="format-grid">
          <div class="format-card" data-format="6X4" data-price="350">
            <div class="format-image">
              <img src="https://placeholder.pics/svg/120x80/DEDEDE/555555/6x4cm" alt="Format 6x4cm">
            </div>
            <div class="format-info">
              <h3>Format 6x4cm</h3>
              <div class="format-price">350‚Ç¨</div>
              <p>Format carte de visite standard</p>
            </div>
          </div>

          <div class="format-card" data-format="6X8" data-price="500">
            <div class="format-image">
              <img src="https://placeholder.pics/svg/120x160/DEDEDE/555555/6x8cm" alt="Format 6x8cm">
            </div>
            <div class="format-info">
              <h3>Format 6x8cm</h3>
              <div class="format-price">500‚Ç¨</div>
              <p>Visibilit√© am√©lior√©e</p>
            </div>
          </div>

          <div class="format-card" data-format="12X4" data-price="500">
            <div class="format-image">
              <img src="https://placeholder.pics/svg/240x80/DEDEDE/555555/12x4cm" alt="Format 12x4cm">
            </div>
            <div class="format-info">
              <h3>Format Bandeau 12x4cm</h3>
              <div class="format-price">500‚Ç¨</div>
              <p>Format horizontal premium</p>
            </div>
          </div>

          <div class="format-card special" data-format="12PARUTIONS" data-price="1800" data-annual="true">
            <div class="special-badge">PROMO</div>
            <div class="format-image">
              <img src="https://placeholder.pics/svg/120x160/E63946/FFFFFF/12%20mois" alt="12 Parutions">
            </div>
            <div class="format-info">
              <h3>Offre Annuelle</h3>
              <div class="old-price">4200‚Ç¨</div>
              <div class="format-price">1800‚Ç¨</div>
              <p>Format 6x4 sur 12 mois</p>
              <div class="savings">√âconomisez 57%</div>
            </div>
          </div>
        </div>

        <input type="hidden" id="selected_format" name="selected_format">
        <input type="hidden" id="format_price" name="format_price">
        <div class="error-message" id="format-error">Veuillez s√©lectionner un format d'encart</div>

        <div class="navigation-buttons">
          <button type="button" class="submit-btn secondary" id="prev-step-2">RETOUR</button>
          <button type="button" class="submit-btn" id="next-step-2">SUIVANT</button>
        </div>
      </div>

      <!-- √âTAPE 3: CHOIX DES MOIS -->
      <div class="form-section" id="step-3">
        <div class="section-title">√âTAPE 3 : MOIS DE PARUTION</div>

        <div id="month-selection-text">
          <p>S√©lectionnez le ou les mois pour lesquels vous souhaitez que votre encart apparaisse :</p>
        </div>

        <div id="annual-text" style="display: none;">
          <p><strong>F√©licitations !</strong> Vous avez choisi l'offre annuelle. Votre encart appara√Ætra sur les 12 mois
            de l'ann√©e 2026.</p>
        </div>

        <div id="month-selector">
          <div class="month-grid">
            <div class="month-card" data-month="Janvier">Janvier</div>
            <div class="month-card" data-month="F√©vrier">F√©vrier</div>
            <div class="month-card" data-month="Mars">Mars</div>
            <div class="month-card" data-month="Avril">Avril</div>
            <div class="month-card" data-month="Mai">Mai</div>
            <div class="month-card" data-month="Juin">Juin</div>
            <div class="month-card" data-month="Juillet">Juillet</div>
            <div class="month-card" data-month="Ao√ªt">Ao√ªt</div>
            <div class="month-card" data-month="Septembre">Septembre</div>
            <div class="month-card" data-month="Octobre">Octobre</div>
            <div class="month-card" data-month="Novembre">Novembre</div>
            <div class="month-card" data-month="D√©cembre">D√©cembre</div>
          </div>
        </div>

        <div class="form-row" id="parutions-row">
          <label for="nombre_parutions">Nombre de parutions</label>
          <input type="number" id="nombre_parutions" name="nombre_parutions" min="1" max="12" value="1">
        </div>

        <input type="hidden" id="selected_months" name="selected_months">
        <div class="error-message" id="month-error">Veuillez s√©lectionner au moins un mois de parution</div>

        <div class="navigation-buttons">
          <button type="button" class="submit-btn secondary" id="prev-step-3">RETOUR</button>
          <button type="button" class="submit-btn" id="next-step-3">SUIVANT</button>
        </div>
      </div>

      <div class="form-section" id="step-4">
        <div class="section-title">üìã R√âCAPITULATIF & VALIDATION</div>

        <!-- R√©capitulatif existant -->
        <div class="summary-section">
          <h3>Votre commande</h3>
          <div class="summary-content">
            <div class="summary-line">
              <span class="summary-label">Entreprise :</span>
              <span class="summary-value" id="summary-entreprise">-</span>
            </div>
            <div class="summary-line">
              <span class="summary-label">Contact :</span>
              <span class="summary-value" id="summary-contact">-</span>
            </div>
            <div class="summary-line">
              <span class="summary-label">Format :</span>
              <span class="summary-value" id="summary-format">-</span>
            </div>
            <div class="summary-line">
              <span class="summary-label">Mois :</span>
              <span class="summary-value" id="summary-months">-</span>
            </div>
            <div class="summary-line">
              <span class="summary-label">Paiement :</span>
              <span class="summary-value" id="summary-payment">-</span>
            </div>
            <div class="summary-line total-line">
              <span class="summary-label">TOTAL :</span>
              <span class="summary-value" id="summary-total">-</span>
            </div>
          </div>
        </div>

        <!-- üÜï NOUVELLE SECTION : CHOIX DE SIGNATURE -->
        <div class="signature-choice-section">
          <h3>‚öñÔ∏è M√©thode de validation</h3>
          <p>Choisissez comment vous souhaitez valider votre commande :</p>

          <div class="signature-options">
            <!-- Option 1 : Signature √©lectronique -->
            <div class="signature-option" data-method="electronic">
              <input type="radio" id="signature_electronic" name="signature_method" value="electronic" checked>
              <label for="signature_electronic" class="signature-option-label">
                <div class="option-icon">üîê</div>
                <div class="option-content">
                  <h4>Signature √©lectronique</h4>
                  <div class="option-benefits">
                    <div class="benefit">‚úÖ Validation imm√©diate</div>
                    <div class="benefit">‚úÖ Valeur juridique compl√®te</div>
                    <div class="benefit">‚úÖ Archivage automatique 10 ans</div>
                    <div class="benefit">‚úÖ Aucun d√©placement n√©cessaire</div>
                  </div>
                  <div class="option-process">
                    <span class="process-badge recommended">RECOMMAND√â</span>
                  </div>
                </div>
              </label>
            </div>

            <!-- Option 2 : Signature physique -->
            <div class="signature-option" data-method="physical">
              <input type="radio" id="signature_physical" name="signature_method" value="physical">
              <label for="signature_physical" class="signature-option-label">
                <div class="option-icon">‚úçÔ∏è</div>
                <div class="option-content">
                  <h4>Signature physique</h4>
                  <div class="option-benefits">
                    <div class="benefit">üìÑ Document PDF √† imprimer</div>
                    <div class="benefit">üìß Retour par email ou courrier</div>
                    <div class="benefit">‚è±Ô∏è Traitement sous 48h ouvr√©es</div>
                    <div class="benefit">üñäÔ∏è Signature manuscrite traditionnelle</div>
                  </div>
                  <div class="option-process">
                    <span class="process-badge traditional">TRADITIONNEL</span>
                  </div>
                </div>
              </label>
            </div>
          </div>
        </div>

        <!-- üîê SECTION SIGNATURE √âLECTRONIQUE (conditionnelle) -->
        <div class="electronic-signature-section" id="electronic-signature-section" style="display: block;">
          <div class="signature-validation-section">
            <div class="section-title">üîê SIGNATURE √âLECTRONIQUE S√âCURIS√âE</div>

            <!-- R√©capitulatif verrouill√© -->
            <div class="locked-summary">
              <h4>üìã R√©capitulatif de votre commande :</h4>
              <div class="locked-summary-content">
                <div class="summary-line"><strong>Entreprise :</strong> <span id="locked-entreprise">-</span></div>
                <div class="summary-line"><strong>Contact :</strong> <span id="locked-contact">-</span></div>
                <div class="summary-line"><strong>Format :</strong> <span id="locked-format">-</span></div>
                <div class="summary-line"><strong>Mois :</strong> <span id="locked-months">-</span></div>
                <div class="summary-line"><strong>Mode paiement :</strong> <span id="locked-payment">-</span></div>
                <div class="summary-line total-line"><strong>TOTAL :</strong> <span id="locked-total">-</span></div>
              </div>
            </div>

            <!-- Zone de validation -->
            <div class="digital-signature-zone">
              <div class="validation-header">
                <h4>‚öñÔ∏è Validation contractuelle</h4>
                <p>En validant ci-dessous, vous confirmez votre commande et acceptez nos conditions g√©n√©rales.</p>
              </div>

              <!-- √âtape 1 : Checkbox d√©taill√©e -->
              <div class="validation-step">
                <label class="signature-checkbox">
                  <input type="checkbox" id="contractual_agreement" name="contractual_agreement" required>
                  <span class="checkmark"></span>
                  <div class="agreement-text">
                    Je, <strong><span id="agreement-contact-name">[Contact]</span></strong>,
                    agissant en qualit√© de repr√©sentant l√©gal de <strong><span
                        id="agreement-company-name">[Entreprise]</span></strong>,
                    confirme par la pr√©sente la commande d'un encart publicitaire dans le calendrier 2026 des
                    Sapeurs-Pompiers
                    de Clermont-l'H√©rault pour un montant total de <strong><span
                        id="agreement-total">[Total]</span>‚Ç¨</strong>
                    et accepte les conditions g√©n√©rales de vente.
                  </div>
                </label>
                <div class="error-message" id="agreement-error">Vous devez accepter les conditions pour continuer</div>
              </div>

              <!-- √âtape 2 : Saisie nom pour confirmation -->
              <div class="validation-step">
                <label for="signature_name">‚úçÔ∏è Confirmez en tapant votre nom complet :</label>
                <input type="text" id="signature_name" name="signature_name"
                  placeholder="Tapez exactement votre nom et pr√©nom" class="signature-input" required>
                <div class="input-help">Ce champ doit correspondre exactement au nom du contact principal</div>
                <div class="error-message" id="signature-name-error">Le nom saisi ne correspond pas au contact principal
                </div>
              </div>

              <!-- √âtape 3 : Confirmation par mot de passe -->
              <div class="validation-step">
                <label for="signature_password">üîë Mot de passe de confirmation :</label>
                <input type="password" id="signature_password" name="signature_password"
                  placeholder="Cr√©ez un mot de passe pour cette commande (min. 6 caract√®res)" class="signature-input"
                  minlength="6" required>
                <div class="input-help">Ce mot de passe servira √† confirmer votre identit√© si n√©cessaire</div>
                <div class="error-message" id="password-error">Le mot de passe doit contenir au moins 6 caract√®res</div>
              </div>

              <!-- Informations de tra√ßabilit√© -->
              <div class="traceability-info">
                <h5>üìä Informations de tra√ßabilit√© :</h5>
                <div class="trace-grid">
                  <div class="trace-item">
                    <span class="trace-label">üïí Date/Heure :</span>
                    <span class="trace-value" id="trace-timestamp">-</span>
                  </div>
                  <div class="trace-item">
                    <span class="trace-label">üåê Adresse IP :</span>
                    <span class="trace-value" id="trace-ip">-</span>
                  </div>
                  <div class="trace-item">
                    <span class="trace-label">üîë ID Validation :</span>
                    <span class="trace-value" id="trace-validation-id">-</span>
                  </div>
                </div>
                <p class="trace-note">
                  Ces informations constituent une preuve de l'authenticit√© de votre validation √©lectronique,
                  conform√©ment aux articles 1365 et suivants du Code Civil fran√ßais.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- üìÑ SECTION SIGNATURE PHYSIQUE (conditionnelle) -->
        <div class="physical-signature-section" id="physical-signature-section" style="display: none;">
          <div class="physical-info-box">
            <h4>üìÑ Instructions pour signature physique</h4>
            <div class="process-steps">
              <div class="process-step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h5>G√©n√©ration du document</h5>
                  <p>Un bon de commande PDF sera g√©n√©r√© avec vos informations</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h5>R√©ception par email</h5>
                  <p>Vous recevrez le document par email dans les 15 minutes</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h5>Signature et retour</h5>
                  <p>Imprimez, signez et renvoyez-nous le document sign√©</p>
                </div>
              </div>
              <div class="process-step">
                <div class="step-number">4</div>
                <div class="step-content">
                  <h5>Validation finale</h5>
                  <p>Traitement de votre commande sous 48h ouvr√©es</p>
                </div>
              </div>
            </div>

            <div class="return-options">
              <h5>üìß Options de retour du document sign√© :</h5>
              <div class="return-option">
                <input type="radio" id="return_email" name="return_method" value="email" checked>
                <label for="return_email">üìß Email : contact@pompiers34800.com</label>
              </div>
              <div class="return-option">
                <input type="radio" id="return_mail" name="return_method" value="mail">
                <label for="return_mail">üìÆ Courrier : 15 Rue Sauvignon, 34800 Clermont-l'H√©rault</label>
              </div>
              <div class="return-option">
                <input type="radio" id="return_hand" name="return_method" value="hand">
                <label for="return_hand">ü§ù Remise en main propre √† la caserne</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Conditions g√©n√©rales -->
        <div class="terms-section">
          <label class="terms-checkbox">
            <input type="checkbox" id="terms_accepted" name="terms_accepted" required>
            <span class="checkmark"></span>
            <span class="terms-text">
              J'accepte les <a href="#" target="_blank">conditions g√©n√©rales de vente</a>
              et la <a href="#" target="_blank">politique de confidentialit√©</a>
            </span>
          </label>
          <div class="error-message" id="terms-error">Vous devez accepter les conditions g√©n√©rales</div>
        </div>

        <!-- Boutons de navigation -->
        <div class="form-navigation">
          <button type="button" class="btn btn-secondary" onclick="previousStep()">‚Üê Retour</button>
          <button type="submit" class="btn btn-primary" id="submit-button">
            <span id="submit-text">FINALISER MA COMMANDE</span>
          </button>
        </div>

        <!-- Champs cach√©s pour la validation -->
        <input type="hidden" id="validation_timestamp" name="validation_timestamp">
        <input type="hidden" id="validation_id" name="validation_id">
        <input type="hidden" id="validation_hash" name="validation_hash">
        <input type="hidden" id="user_ip" name="user_ip">
        <input type="hidden" id="user_agent" name="user_agent">
      </div>
    </form>

    <!-- CONFIRMATION -->
    <div class="confirmation" id="confirmation">
      <div class="confirmation-icon">‚úì</div>
      <h2>Commande confirm√©e avec succ√®s !</h2>
      <p>Merci d'avoir command√© un encart publicitaire pour le calendrier 2026 des Sapeurs-Pompiers de Clermont
        l'H√©rault.</p>

      <div class="summary-section">
        <div class="section-title">VOTRE COMMANDE</div>
        <div class="summary-content">
          <div class="summary-row">
            <span class="label">N¬∞ de commande :</span>
            <span class="value" id="confirmation-order-number">CMD-2026-XXXXX</span>
          </div>
          <div class="summary-row">
            <span class="label">Format :</span>
            <span class="value" id="confirmation-format">-</span>
          </div>
          <div class="summary-row">
            <span class="label">Mois :</span>
            <span class="value" id="confirmation-months">-</span>
          </div>
          <div class="summary-row">
            <span class="label">Paiement :</span>
            <span class="value" id="confirmation-payment">-</span>
          </div>
          <div class="summary-row total">
            <span class="label">Total :</span>
            <span class="value" id="confirmation-total">0 ‚Ç¨</span>
          </div>
        </div>
      </div>

      <div class="next-actions">
        <h3>Prochaines √©tapes :</h3>
        <ol>
          <li>Vous recevrez un <strong>Bon √† Tirer (BAT)</strong> dans les prochains jours</li>
          <li>Apr√®s validation du BAT, nous proc√©derons √† l'impression</li>
          <li>Votre encart appara√Ætra dans le calendrier 2026</li>
        </ol>
      </div>

      <div style="text-align: center; margin-top: 30px;">
        <p><strong>Contact :</strong> 04.67.44.99.70 - contact@pompiers34800.com</p>
        <p style="margin-top: 20px;">Merci pour votre soutien !</p>
      </div>
    </div>
  </div>

  <script src="../assets/js/main.js" defer></script>
  <script src="../assets/js/signature-validation.js" defer></script>
  <script src="../assets/js/enterprise-form.js" defer></script>
  <script src="../assets/js/prefillform-enterprise.js" defer></script>
</body>
</html>